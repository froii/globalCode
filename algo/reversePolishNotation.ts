// обчислення виразу в зворотньому польському записі (RPN).

// Принцип роботи:
// Використовуємо стек для зберігання чисел
// Читаємо токени зліва направо
// Якщо зустрічаємо число - додаємо його в стек
// Якщо зустрічаємо оператор - дістаємо два числа зі стеку, виконуємо операцію і результат кладемо назад

// Обробка операцій:
// При операції беремо два останні числа зі стеку
// Важливий порядок: перше число яке дістаємо (b) буде другим операндом
// Для ділення використовуємо Math.trunc() для округлення до цілого

// Особливості:
// Використовуємо Number() для конвертації рядків у числа
// Операції виконуються з урахуванням порядку чисел у стеку
// У кінці в стеку залишається одне число - результат



export function reversePolishNotation(tokens: string[]): number {
    const stack: number[] = [];
    
    for (const token of tokens) {
      if (['+', '-', '*', '/'].includes(token)) {
        // Отримуємо два останні числа зі стеку
        const b = stack.pop()!;
        const a = stack.pop()!;
        
        // Виконуємо операцію і додаємо результат назад у стек
        switch (token) {
          case '+':
            stack.push(a + b);
            break;
          case '-':
            stack.push(a - b);
            break;
          case '*':
            stack.push(a * b);
            break;
          case '/':
            // Округляємо до цілого числа в сторону нуля
            stack.push(Math.trunc(a / b));
            break;
        }
      } else {
        // Якщо це число - додаємо його в стек
        stack.push(Number(token));
      }
    }
    
    // Результат буде єдиним числом у стеку
    return stack[0];
  }

  function testRPN(): void {
    // Тест 1: Базові операції
    const test1 = ["2", "3", "+", "4", "*"];
    console.log(`Вхід: ${test1.join(' ')}`);
    console.log(`Результат: ${reversePolishNotation(test1)}`); // (2 + 3) * 4 = 20
  
    // Тест 2: Складніший вираз з діленням
    const test2 = ["10", "6", "9", "3", "+", "-11", "*", "/", "*", "17", "+", "5", "+"];
    console.log(`Вхід: ${test2.join(' ')}`);
    console.log(`Результат: ${reversePolishNotation(test2)}`); // 10 6 9 3 + -11 * / * 17 + 5 +   = 22
  
    // Тест 3: Від'ємні числа
    const test3 = ["4", "13", "5", "/", "+"];
    console.log(`Вхід: ${test3.join(' ')}`);
    console.log(`Результат: ${reversePolishNotation(test3)}`); // 4 13 5 / +  = 6
  }
  
  testRPN();